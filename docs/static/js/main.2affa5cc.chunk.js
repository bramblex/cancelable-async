(this["webpackJsonpcancelable-async"]=this["webpackJsonpcancelable-async"]||[]).push([[0],{11:function(e,_,a){e.exports=a(18)},16:function(e,_,a){},18:function(e,_,a){"use strict";a.r(_);var t=a(0),n=a.n(t),c=a(5),l=a.n(c),r=(a(16),a(6));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(r.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_brambles_Workspace_cancelable_async_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_home_brambles_Workspace_cancelable_async_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_home_brambles_Workspace_cancelable_async_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),_home_brambles_Workspace_cancelable_async_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_home_brambles_Workspace_cancelable_async_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),_cancelable_async__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8),defaultValue="\nfor (let i=0; i < 10; i++) {\n  await (new Promise(resolve => setTimeout(resolve, 1e3)));\n  console.log(i);\n}\n";function App(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)(defaultValue),_useState2=Object(_home_brambles_Workspace_cancelable_async_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState,2),content=_useState2[0],setContent=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)(""),_useState4=Object(_home_brambles_Workspace_cancelable_async_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState3,2),finalCode=_useState4[0],setFinalCode=_useState4[1],cancelRef=Object(react__WEBPACK_IMPORTED_MODULE_3__.useRef)(),_useState5=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)([]),_useState6=Object(_home_brambles_Workspace_cancelable_async_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_useState5,2),logs=_useState6[0],setLogs=_useState6[1];return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("h1",null,"Cancelable Async"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("hr",null),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("h2",null,"Async Function:"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",null,"async function() {",react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("textarea",{value:content,onChange:function(e){return setContent(e.target.value)},style:{width:"calc(100% - 2em)",marginLeft:"2em",height:"200px"}}),"}"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("button",{onClick:Object(_home_brambles_Workspace_cancelable_async_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_home_brambles_Workspace_cancelable_async_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function _callee(){var console,funcCode,_eval,_eval2,func,cancel;return _home_brambles_Workspace_cancelable_async_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return setLogs([]),console={log:function(){for(var e=arguments.length,_=new Array(e),a=0;a<e;a++)_[a]=arguments[a];setLogs((function(e){return e.concat(_)}))}},funcCode=Object(_cancelable_async__WEBPACK_IMPORTED_MODULE_4__.a)("async function __func__ (){ ".concat(content," }")),setFinalCode(funcCode),_eval=eval(funcCode),_eval2=Object(_home_brambles_Workspace_cancelable_async_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_eval,2),func=_eval2[0],cancel=_eval2[1],cancelRef.current=cancel,_context.prev=6,_context.next=9,func();case 9:console.log("=== End ==="),_context.next=15;break;case 12:_context.prev=12,_context.t0=_context.catch(6),"Cancel"===_context.t0.message&&console.log("=== Cancel ===");case 15:case"end":return _context.stop()}}),_callee,null,[[6,12]])})))},"Run"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("button",{onClick:function(){return cancelRef.current&&cancelRef.current()}},"Cancel")),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("h2",null,"Compiled Code:"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("pre",null,finalCode),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("h2",null,"Console:"),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",null,logs.map((function(e,_){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",{key:_},e)}))))}__webpack_exports__.a=App},8:function(e,_,a){"use strict";a.d(_,"a",(function(){return r}));var t=a(9),n=a(10),c=a(3),l=a.n(c);function r(e){console.log(e);var _,a=t.a("function"===typeof e?e.toString():e,{});a.body[0].body=(_=a.body[0].body,l.a.replace(_,{enter:function(e){return/function/i.test(e.type)?l.a.VisitorOption.Skip:e},leave:function(e){return"AwaitExpression"===e.type?{type:"CallExpression",callee:{type:"Identifier",name:"__$shouldCancel__"},arguments:[e]}:e}}));var c=n.a(a).replace(/;\s*$/,"");return"((function () {\n    var ".concat("__$isCancel__"," = false;\n    function ").concat("__$shouldCancel__","(value) { \n      if (").concat("__$isCancel__",") throw new Error('Cancel'); \n      return value;\n    };\n    return [").concat(c,", function (){ ").concat("__$isCancel__"," = true }];\n  })())")}}},[[11,1,2]]]);
//# sourceMappingURL=main.2affa5cc.chunk.js.map